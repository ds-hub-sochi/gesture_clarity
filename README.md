# Валидация понятности жестов

Этот репозиторий нужен для валидации результатов разметки жестов на понятность.

## Использование

Для удобной работы реализован cli, который позволяет сделать следующее:

1. Агрегировать разметку одного пака и получить точность для каждого из жестов. 

    Для этого необходимо выполнить следующую команду:

    ```bash
    python ./src/cli/validate_markup.py путь-до-файла-с-разметкой путь-до-словаря-схлопываний путь-до-файла-со-сламанными-символами минимальное-значение-для-семантической-близости заголовок
    ```

    Например,

    ```bash
    python ./src/cli/validate_markup.py ./data/raw/res_marks_sberai_p1.tsv ./data/additional/clap_rules/clap_rules_extended.json ./data/additional/corrupted_cases/corrupted_cases.json 0.7 "Accuracy с   
    использованием семантической близости и расширенного словаря схлопываний"
    ```

   ```bash
   N.B переданный таким образом заголовок будет использован в качестве названия для сгенерированных графиков и таблиц, а также будет использован в заголовке графика.
   ```
   
   В реузльтате работы будут созданы таблицы с агрегированными результатами и график с точностью для каждого жеста.
  
2. Сравнивать один пак с оценкой генерации с другим.

   Для этого необходимо выполнить следующую команду:

   ```bash
   python ./src/cli/compare_markups.py путь-до-первого-файла-с-разметкой путь-до-второго-файла-с-разметкой путь-до-словаря-схлопываний путь-до-файла-со-сламанными-символами минимальное-значение-для-семантической- 
   близости заголовок
   ```

   Например,

   ```bash
   python ./src/cli/compare_markups.py ./data/raw/res_marks_sberai_p2.tsv ./data/raw/res_marks_sberai_p4.tsv ./data/additional/clap_rules/clap_rules_extended.json 
   ./data/additional/corrupted_cases/corrupted_cases.json 0.7 "Сравнение качества генерации: скелет vs. диффузия"
   ```

   ```bash
   N.B переданный таким образом заголовок будет использован в качестве названия для сгенерированного графика, а также будет использован в заголовке графика.
   ```

   В результате будет создан график, содержащий barplot, ключи которого - это общие жесты двух паков, а высота столбца - это точность соответствующего алгоритма для каждого из жестов.

3. Проводить A/B-тестирование различных алгоритмов генерации

   Для этого необходимо выполнить следующую команду:

   Например,

   ```bash
   python ./src/cli/compare_markups.py путь-до-файла-с-контрольной-разметкой путь-до-файла-с-тестовой-разметкой путь-до-словаря-схлопываний путь-до-файла-со-сламанными-символами минимальное-значение-для- 
   семантической-близости значение-alpha-для-тестов
   ```

   ```bash
   python ./src/cli/run_ab_tests.py ./data/raw/res_marks_sberai_p1.tsv ./data/raw/res_marks_sberai_p1.tsv ./data/additional/clap_rules/clap_rules_extended.json 
   ./data/additional/corrupted_cases/corrupted_cases.json 0.7 0.05
   ```

   В результате в консоль будут выведены результаты тестирования нулевой гипотезы против гипотезы о превосходстве тестового пака для T-теста и теста Манна-Уитни.
   

## Сторонние ресурсы

Страничка с результатами экспериментов и актуальными версиями словаря живёт [здесь](https://www.notion.so/maximazzik/5ded383160a043b1881a84e8d31adfa8).
